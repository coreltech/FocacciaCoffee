<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Focaccia & Coffee ERP</title>
  <link rel="stylesheet" href="src/ui/theme.css" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
</head>

<body>

  <header class="nav-bar">

    <button class="nav-btn" data-tab="dashboard">ğŸ  Inicio</button>
    <button class="nav-btn" data-tab="tasas">ğŸª™ Tasas</button>

    <div class="nav-sep"></div>
    <button class="nav-btn" data-tab="suministros">ğŸ“¦ Suministros</button>
    <button class="nav-btn" data-tab="recetas">ğŸ‘©â€ğŸ³ Recetas</button>
    <button class="nav-btn" data-tab="produccion">ğŸ¥£ ProducciÃ³n</button>
    <button class="nav-btn" data-tab="compras">ğŸ›’ Compras</button>
    <button class="nav-btn" data-tab="mermas" style="color:var(--error); border-color:var(--error);">ğŸ—‘ï¸
      Perdidas</button>

    <button class="nav-btn" data-tab="catalogo">ğŸ“‹ CatÃ¡logo</button>
    <button class="nav-btn" data-tab="config_productos">âš™ï¸ Config</button>
    <button class="nav-btn" data-tab="ventas">ğŸ¥– Ventas</button>

    <div class="nav-sep"></div>
    <button class="nav-btn" data-tab="administracion">ğŸ’¼ Admin</button>
    <button class="nav-btn" data-tab="plan">ğŸš€ Estrategia</button>
    <button class="nav-btn" data-tab="reportes">ğŸ“ˆ Reportes</button>
    <button class="nav-btn" data-tab="biblioteca">ğŸ“š Biblioteca</button>

  </header>

  <main id="app-content" style="padding: 20px; max-width: 1400px; margin: 0 auto;">
    <div class="stat-card" style="text-align:center; padding: 50px;">
      <h2 style="color: #64748b;">ğŸ Preparando la masa...</h2>
      <p style="color: #94a3b8;">Iniciando sistema de inteligencia artesanal</p>
    </div>
  </main>

  <script type="module">
    import { initRouter } from './src/core/router.js';
    import { StateManager } from './src/core/state.js';

    window.addEventListener('load', async () => {
      try {
        // Pre-carga de datos crÃ­ticos (Tasas)
        await StateManager.init();

        // Carga de la App
        await initRouter();
      } catch (err) {
        console.error("Error de inicio:", err);
        document.getElementById('app-content').innerHTML = `
          <div class="stat-card" style="border:2px solid #ef4444; background: #fef2f2;">
            <h3 style="color: #b91c1c;">âŒ Error de Sistema</h3>
            <p>No se pudo conectar con los mÃ³dulos internos.</p>
            <pre style="font-size: 0.8rem; background: #fee2e2; padding: 10px; border-radius: 8px;">${err.message}</pre>
          </div>
        `;
      }
    });
  </script>
</body>

</html>